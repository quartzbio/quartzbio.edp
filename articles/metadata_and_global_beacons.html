<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Metadata and Global Beacons • quartzbio.edp</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Metadata and Global Beacons">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">quartzbio.edp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.99.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/r_authentication.html">Authentication</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/quartzbio/quartzbio.edp/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Metadata and Global Beacons</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/quartzbio/quartzbio.edp/blob/main/vignettes/metadata_and_global_beacons.Rmd" class="external-link"><code>vignettes/metadata_and_global_beacons.Rmd</code></a></small>
      <div class="d-none name"><code>metadata_and_global_beacons.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Users with Write or Admin permissions on vault objects (files,
folders, and datasets) have the ability to add tags or metadata to those
objects to facilitate data discovery and accessibility. Users with Write
or Admin permissions on datasets can also add special labels called
entities to fields that contain information such as genes, variants, and
samples. To enable users to search for datasets based on the entities
they contain, Admins can enable Global Beacons indexing for datasets.
For more information about Search tools and data discovery on the EDP,
users can refer to the <a href="data_discovery_via_API.html">Data
Discovery via API</a> documentation.</p>
</div>
<div class="section level2">
<h2 id="tags">Tags<a class="anchor" aria-label="anchor" href="#tags"></a>
</h2>
<p>Tags are case-insensitive lists of strings. Tags can be used to
filter and search for objects.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://quartzbio.github.io/quartzbio.edp/">quartzbio.edp</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Upload a file</span></span>
<span><span class="va">vault</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Vault.get_personal_vault.html">Vault.get_personal_vault</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">object</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Object.upload_file.html">Object.upload_file</a></span><span class="op">(</span><span class="st">"./analysis.tsv"</span>, <span class="va">vault</span><span class="op">$</span><span class="va">id</span>, <span class="st">"/"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add metadata and tags to the object</span></span>
<span><span class="fu"><a href="../reference/Object.update.html">Object.update</a></span><span class="op">(</span><span class="va">object</span><span class="op">$</span><span class="va">id</span>, tags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"tag1"</span>, <span class="st">"tag2"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="metadata">Metadata<a class="anchor" aria-label="anchor" href="#metadata"></a>
</h2>
<p>Metadata is represented by key/value pairs. While nested value pairs
are allowed, users are recommended to use a flat metadata structure.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://quartzbio.github.io/quartzbio.edp/">quartzbio.edp</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Upload a file</span></span>
<span><span class="va">vault</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Vault.get_personal_vault.html">Vault.get_personal_vault</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">object</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Object.upload_file.html">Object.upload_file</a></span><span class="op">(</span><span class="st">"./analysis.tsv"</span>, <span class="va">vault</span><span class="op">$</span><span class="va">id</span>, <span class="st">"/"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add metadata and tags to the object</span></span>
<span><span class="fu"><a href="../reference/Object.update.html">Object.update</a></span><span class="op">(</span><span class="va">object</span><span class="op">$</span><span class="va">id</span>, metadata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>file_type <span class="op">=</span> <span class="st">"CSV"</span>, project <span class="op">=</span> <span class="st">"My Project"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Any metadata values that contain URLs will be converted to links on
the EDP web interface.</p>
</div>
<div class="section level2">
<h2 id="entities">Entities<a class="anchor" aria-label="anchor" href="#entities"></a>
</h2>
<p>Entities are special labels for dataset fields that contain specific
content, such as genes, variants, vault objects, samples, and more.
Entities allow for cross-dataset data harmonization, easy filtering,
Global Beacons, and other entity-specific functions.</p>
<p>Entities can also be added, removed, or switched using the web
interface for any dataset to which the user has write access. On the
dataset view, any field with an orange label next to the field type is
an entity field. Entities can be changed by clicking on the pencil icon
via UI.</p>
</div>
<div class="section level2">
<h2 id="global-beacons">Global Beacons<a class="anchor" aria-label="anchor" href="#global-beacons"></a>
</h2>
<p>Global Beacons are specialized search endpoints that enable anyone in
a user’s organization to find datasets based on the entities they
contain (i.e. variants, genes). Both the datasets in the public and in
the private vaults can be indexed. Depending on the dataset size,
indexing time may vary.</p>
<p>Once the dataset has been indexed, users will be able to perform
Global Beacon Search and find this dataset.</p>
<p>The EDP Python and R clients provide the functionality to work with
Global Beacons. Users with Admin permissions for a dataset can check the
status of the Global Beacon on the dataset as well as enable or disable
Global Beacons.</p>
<p>When working with Global Beacons via API, the output will display the
<code>status</code> attribute, which is either <code>indexing</code>,
<code>completed</code>, or <code>destroying</code>, as well as the
<code>progress_percent</code> attribute which describes the percentage
of the task completed. While indexing is still in progress, users won’t
be able to perform Global Beacon Search for that dataset. A dataset is
available for Global Beacon Search when the
<code>progress_percent</code> is 100 and the <code>status</code> is
completed.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://quartzbio.github.io/quartzbio.edp/">quartzbio.edp</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Turn on Global Beacon on the dataset</span></span>
<span><span class="fu"><a href="../reference/Object.enable_global_beacon.html">Object.enable_global_beacon</a></span><span class="op">(</span><span class="va">dataset_id</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example Output:</span></span>
<span><span class="co">## $id</span></span>
<span><span class="co">## [1] 110</span></span>
<span><span class="co">## $datastore_id</span></span>
<span><span class="co">## [1] 7</span></span>
<span><span class="co">## $dataset_id</span></span>
<span><span class="co">## [1] 1.658667e+18</span></span>
<span><span class="co">## $status</span></span>
<span><span class="co">## [1] "indexing"</span></span>
<span><span class="co">## $progress_percent</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">## $is_deleted</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span></span>
<span><span class="co"># Getting the status of global beacon on the dataset</span></span>
<span><span class="fu"><a href="../reference/Object.get_global_beacon_status.html">Object.get_global_beacon_status</a></span><span class="op">(</span><span class="va">dataset_id</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## $id</span></span>
<span><span class="co">## [1] 110</span></span>
<span><span class="co">## $datastore_id</span></span>
<span><span class="co">## [1] 7</span></span>
<span><span class="co">## $dataset_id</span></span>
<span><span class="co">## [1] 1.658667e+18</span></span>
<span><span class="co">## $status</span></span>
<span><span class="co">## [1] "completed"</span></span>
<span><span class="co">## $progress_percent</span></span>
<span><span class="co">## [1] 100</span></span>
<span><span class="co">## $is_deleted</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span></span>
<span><span class="co"># Disabling Global Beacon on dataset</span></span>
<span><span class="fu"><a href="../reference/Object.disable_global_beacon.html">Object.disable_global_beacon</a></span><span class="op">(</span><span class="va">dataset_id</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example Ouput:</span></span>
<span><span class="co">## $id</span></span>
<span><span class="co">## [1] 110</span></span>
<span><span class="co">## $datastore_id</span></span>
<span><span class="co">## [1] 7</span></span>
<span><span class="co">## $dataset_id</span></span>
<span><span class="co">## [1] 1.658667e+18</span></span>
<span><span class="co">## $status</span></span>
<span><span class="co">## [1] "destroying"</span></span>
<span><span class="co">## $progress_percent</span></span>
<span><span class="co">## [1] 0</span></span>
<span><span class="co">## $is_deleted</span></span>
<span><span class="co">## [1] FALSE</span></span></code></pre></div>
<p>Users should note that upsert, overwrite, and delete commits are not
yet supported by Global Beacon Search. If an indexed dataset has upsert,
overwrite, or delete commits, Global Beacon search results may be
inaccurate. To ensure accurate search results, users should copy the
dataset (via the UI or <a href="creating_and_migrating_datasets.html">API</a>) and enable Global
Beacons on the new one instead. For more information about commits,
users can refer to the <a href="import_data.html">Importing Data</a>
documentation.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Caplan, Karl Forner, QuartzBio.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Last modified: 20-Apr-2025 Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
